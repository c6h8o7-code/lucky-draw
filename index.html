<html>
    <head>
        <title>
            官方版抽奖系统
        </title>
    </head>
    <body>
        <svg id="1" width="500" height="500"></svg>
        <button onclick="rotate()">旋转</button>
<script>
    function createSector(fromangle, angle) {
    const rad = angle * Math.PI / 180;
    const fromrad = fromangle * Math.PI / 180;
    const rrad = rad + fromrad;
    const x = 250 + 250 * Math.sin(rad);
    const y = 250 - 250 * Math.cos(rad);
    const fx = 250 + 250 * Math.sin(fromrad);
    const fy = 250 - 250 * Math.cos(fromrad);
    return `M250,250 L${fx},${fy} A250,250 0 ${angle - fromangle > 180 ? 1 : 0},1 ${x},${y} Z`;
    }
    arcs = [11, 13, 9, 3, 9, 20, 20, 12, 3]
    texts = ["3个小乌龟", "谢谢惠顾", "3元", "2元", "1元", "5毛", "1个小乌龟", "谢谢惠顾", "2元"]
    colours = ["red", "blue", "green", "orange", "purple", "green", "red", "blue", "orange"]
    function show(offset){
        now = offset;
        document.getElementById('1').innerHTML = ""
        for(let i=1;i<=9;i++){
            document.getElementById('1').innerHTML += `
            <path d="${createSector(now, now + arcs[i-1] * 3.6)}" fill="${colours[i-1]}"/>
            `;
            document.getElementById('1').innerHTML += `
            <text x="${250 + 200 * Math.sin((now + arcs[i-1] * 1.8) * Math.PI / 180)}" transform="rotate(${now - 45} ${250 + 200 * Math.sin((now + arcs[i-1] * 1.8) * Math.PI / 180)}, ${250 - 200 * Math.cos((now + arcs[i-1] * 1.8) * Math.PI / 180)})"
            y="${250 - 200 * Math.cos((now + arcs[i-1] * 1.8) * Math.PI / 180)}" text-anchor="middle">
            ${texts[i-1]}</text>
            `
            now += arcs[i-1] * 3.6;
        }
    }
    o = 0
    async function rotate(){
        setInterval(()=>o += 5, 500)
    }
    setInterval(()=>show(o), 20)
    </script>

    </body>
</html>